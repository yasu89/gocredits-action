name: 'Using gocredits'
author: yasu89
description: 'GitHub Action for gocredits'
branding:
  icon: 'file-text'
  color: 'blue'
inputs:
  github-token:
    description: 'The GitHub token'
    default: ${{ github.token }}
    required: false
  version:
    description: 'Version of gocredits'
    default: 'latest'
    required: false
  force:
    description: 'Enable force setup'
    default: ''
    required: false
runs:
  using: 'composite'
  steps:
    -
      id: set-path
      shell: bash
      run: echo "path=$HOME/.gocredits/bin" >> $GITHUB_OUTPUT
    -
      shell: bash
      run: |
        mkdir -p ${{ steps.set-path.outputs.path }}
        if [[ "$RUNNER_OS" == "Linux" || "$RUNNER_OS" == "macOS" ]]; then
          echo "${{ steps.set-path.outputs.path }}" >> $GITHUB_PATH
        elif [[ "$RUNNER_OS" == "Windows" ]]; then
          echo $(cygpath -w "${{ steps.set-path.outputs.path }}") >> $GITHUB_PATH
        fi
    -
      uses: k1LoW/gh-setup@v1
      with:
        repo: github.com/Songmu/gocredits
        github-token: ${{ inputs.github-token }}
        version: ${{ inputs.version }}
        bin-match: gocredits
        strict: true
        force: ${{ inputs.force }}
        bin-dir: ${{ steps.set-path.outputs.path }}
